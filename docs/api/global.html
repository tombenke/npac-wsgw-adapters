<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="constsetupTopics=(container,server,topics)=%3E%7Bcontainer.logger.debug(%60wsServer:setupTopicstopics:$%7BJSON.stringify(topics)%7D%60)if(_.isArray(topics.inbound))%7B_.map(topics.inbound,setupInboundTopic(container,server))%7Dif(_.isArray(topics.outbound))%7B_.map(topics.outbound,setupOutboundTopic(container,server))%7D%7D"><span class="type-signature"></span>const setupTopics = (container, server, topics) => {
    container.logger.debug(`wsServer: setupTopics topics:${JSON.stringify(topics)}`)
    if (_.isArray(topics.inbound)) {
        _.map(topics.inbound, setupInboundTopic(container, server))
    }

    if (_.isArray(topics.outbound)) {
        _.map(topics.outbound, setupOutboundTopic(container, server))
    }
}<span class="signature">(container, socket, topics)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Setup observers to the inbound topics, as well as producers to the outbound topics</p>
<p>Get the topic names for the inbound topics, then create PDMS subscribers,<br>
that receives the messages coming from the NATS messaging middleware of the given topic<br>
then forwards them to the websocket channel with the same event name.<br>
Do the same for the outbound topics, but the opposite direction, observing the websocket events<br>
then publishing towards the corresponding NATS topic.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>container</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The container object</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>socket</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The socket the server communicates with the connected client through</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>topics</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The object, which holds two arrays of topic names, one for the <code>inbound</code> topics, and one for the <code>outbound</code> ones.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setupInboundTopic"><span class="type-signature"></span>setupInboundTopic<span class="signature">(container, socket, topic)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Setup an inbound topic</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>container</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The container object</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>socket</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The socket the server communicates with the connected client through</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>topic</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the topic</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setupOutboundTopic"><span class="type-signature"></span>setupOutboundTopic<span class="signature">(container, socket, topic)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Setup an outbound topic</p>
<p>Setup a websocket client to observe the <code>&lt;topic&gt;</code> named events, then publish them to the<br>
NATS topic with the same name.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>container</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The container object</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>socket</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The socket the server communicates with the connected client through</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>topic</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the topic</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="shutdown"><span class="type-signature"></span>shutdown<span class="signature">(container, next)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The shutdown function of the service adapter</p>
<p>This function should be registered with the shutdown phase, then npac will call when graceful shutdown happens.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>container</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The actual state of the container this adapter is running</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Error-first callback function to pass the result partial container extended with the wsServer adapter.</p>
<p>see also: the <code>npac.startup</code> process description.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="startup"><span class="type-signature"></span>startup<span class="signature">(container, next)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>The startup function of the adapter</p>
<p>This function should be registered with the startup phase, then npac will call when the project is starting.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>container</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The actual state of the container this adapter will be added</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Error-first callback function to pass the result partial container extended with the wsServer adapter.</p>
<p>see also: the <code>npac.startup</code> process description.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#constsetupTopics=(container,server,topics)=%253E%257Bcontainer.logger.debug(%2560wsServer:setupTopicstopics:$%257BJSON.stringify(topics)%257D%2560)if(_.isArray(topics.inbound))%257B_.map(topics.inbound,setupInboundTopic(container,server))%257Dif(_.isArray(topics.outbound))%257B_.map(topics.outbound,setupOutboundTopic(container,server))%257D%257D">const setupTopics = (container, server, topics) => {
    container.logger.debug(`wsServer: setupTopics topics:${JSON.stringify(topics)}`)
    if (_.isArray(topics.inbound)) {
        _.map(topics.inbound, setupInboundTopic(container, server))
    }

    if (_.isArray(topics.outbound)) {
        _.map(topics.outbound, setupOutboundTopic(container, server))
    }
}</a></li><li><a href="global.html#setupInboundTopic">setupInboundTopic</a></li><li><a href="global.html#setupOutboundTopic">setupOutboundTopic</a></li><li><a href="global.html#shutdown">shutdown</a></li><li><a href="global.html#startup">startup</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>